!function(){"use strict";var e=angular.module("ngYoutubeEmbed",[]),t=[],a="https://www.youtube.com/iframe_api",o=/^(?:https?:\/\/)?(?:www\.|m\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,i=/^(?:https?:\/\/)?(?:www\.)?(?:gaming.youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;function n(e,t,a,o){var i=function(e,t,a){var o=a||"";if(!e.origin){var i=location.protocol.concat("//").concat(window.location.hostname);e.origin=i}var n="enablejsapi="+e.enablejsapi+"&autoplay="+e.autoplay+"&cc_load_policy="+e.ccloadpolicy+"&color="+e.color+"&controls="+e.controls+"&disablekb="+e.disablekb+"&end="+e.end+"&fs="+e.fs+"&hl="+e.hl+"&iv_load_policy="+e.ivloadpolicy+"&playlist="+t.playlistArray+"&playsinline="+e.playsinline+"&rel="+e.rel+"&showinfo="+e.showinfo+"&start="+e.start+"&modestbranding="+e.modestbranding+"&loop="+e.loop+"&listType="+e.listType+"&list="+e.list+"&origin="+e.origin;n=n.replace(/([a-zA-Z_]+=&)/g,"").replace(/&$/,"").replace(/([a-zA-Z_]+=$)/g,"");var r="";window.onNgYtIframeLoad&&(r='onLoad="onNgYtIframeLoad()"');var l='<iframe id="'+e.videoid+'" width="'+e.width+'" height="'+e.height+'" src="https://www.youtube.com/embed/'+o+"?"+n+'" frameborder="0" allowfullscreen '+r+"></iframe>";return window.onNgYtIframeLoad||(window.onNgYtIframeLoad=function(){window.onYouTubeIframeAPIReady()}),l}(e,t,o);t.youtubeEmbedFrame=a.trustAsHtml(i)}e.service("ngYoutubeEmbedService",["$window","$rootScope",function(e,a){this.setReadyState=function(){e.onYouTubeIframeAPIReady=function(){t.forEach(function(e){a.$emit("youtubeIframeEmbedApiLoaded",e)})}};var n=[];a.$on("addNewPlayer",function(e,t){n[t.id]=t.player}),this.getPlayerById=function(e){return n[e]},this.getVideoIdByUrl=function(e){var t=-1!==e.indexOf("gaming")?i:o,a=e.match(t);return null!==a?a[1]:e}}]),e.directive("ngYoutubeEmbed",["$sce","ngYoutubeEmbedService","$rootScope",function(e,o,i){return{restrict:"E",template:'<div ng-bind-html="youtubeEmbedFrame"></div>',scope:{video:"=",onready:"=",onstatechange:"=",onplaybackqualitychange:"=",onplaybackratechange:"=",onerror:"=",onapichange:"=",autoplay:"@",ccloadpolicy:"@",color:"@",controls:"@",disablekb:"@",end:"@end",fs:"@",hl:"@",ivloadpolicy:"@",playlist:"@",playsinline:"@",rel:"@",showinfo:"@",start:"@",width:"@",height:"@",enablejsapi:"@",videoid:"@",modestbranding:"@",loop:"@",listtype:"@",list:"@",origin:"@"},link:function(r,l,d){l[0].removeAttribute("id");var s,c,p={width:r.width?r.width:500,height:r.height?r.height:350,autoplay:"true"==r.autoplay?1:0,ccloadpolicy:"true"==r.ccloadpolicy?1:0,color:"white"==r.color?"white":"red",controls:"false"==r.controls?0:1,disablekb:"false"==r.disablekb?1:0,end:r.end?r.end:"",fs:"false"==r.fs?0:1,hl:r.hl?r.hl:"",ivloadpolicy:"false"==r.ivloadpolicy?3:1,playlist:r.playlist?r.playlist:"",playsinline:"true"==r.playsinline?1:0,rel:"false"==r.rel?0:1,showinfo:"false"==r.showinfo?0:1,start:r.start?r.start:"",enablejsapi:"true"===r.enablejsapi?1:0,videoid:r.videoid?r.videoid:"",modestbranding:"true"===r.modestbranding?1:0,loop:"true"===r.loop?1:"",listType:r.listtype?r.listtype:"",list:r.list?r.list:"",origin:r.origin?r.origin:""};if(p.enablejsapi&&!function(){for(var e=a,t=document.getElementsByTagName("script"),o=t.length;o--;)if(t[o].src==e)return!0;return!1}()&&(s=document.createElement("script"),c=document.getElementsByTagName("script")[0],s.src=a,c.parentNode.insertBefore(s,c),o.setReadyState()),p.enablejsapi&&i.$on("youtubeIframeEmbedApiLoaded",function(e,t){if(t===p.videoid){var a={};r.onready&&(a.onReady=r.onready),r.onstatechange&&(a.onStateChange=r.onstatechange),r.onplaybackqualitychange&&(a.onPlaybackQualityChange=r.onplaybackqualitychange),r.onplaybackratechange&&(a.onPlaybackRateChange=r.onplaybackratechange),r.onerror&&(a.onError=r.onerror),r.onapichange&&(a.onApiChange=r.onapichange);var o=new YT.Player(t,{events:a});i.$emit("addNewPlayer",{player:o,id:t})}}),r.playlistArray=[],p.playlist)for(var u=r.playlist.split(","),y=0;y<u.length;y++)r.playlistArray.push(o.getVideoIdByUrl(u[y]));p.videoid&&p.enablejsapi&&t.push(p.videoid),p.list&&(p.listType?n(p,r,e):console.warn("The list parameter works in conjunction with the listtype parameter, please provide a valid value for the listtype parameter in order to render a list. Read documentation here - https://github.com/ArunMichaelDsouza/ng-youtube-embed#list-string")),p.listType&&(p.list?n(p,r,e):console.warn("The listtype parameter works in conjunction with the list parameter, please provide a valid value for the list parameter in order to render a list. Read documentation here - https://github.com/ArunMichaelDsouza/ng-youtube-embed#listtype-string")),p.listType||p.list||r.video||console.warn("Please provide a valid youtube video URL or ID to render the iframe embed player. Read documentation here - https://github.com/ArunMichaelDsouza/ng-youtube-embed"),r.$watch("video",function(t){if(t){var a=o.getVideoIdByUrl(t);n(p,r,e,a)}})}}}])}();