!function(){"use strict";function a(){var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}function b(){for(var a="https://www.youtube.com/iframe_api",b=document.getElementsByTagName("script"),c=b.length;c--;)if(b[c].src==a)return!0;return!1}var c=angular.module("ngYoutubeEmbed",[]),d=[];c.service("youtubeEmbedUtils",["$window","$rootScope",function(a,b){this.setReadyState=function(){window.onYouTubeIframeAPIReady=function(){console.log(d),d.forEach(function(a){b.$emit("test",{message:a})})}};var c=[];b.$on("addPlayer",function(a,b){c[b.id]=b.player}),this.getPlayer=function(a){return c[a]}}]),c.directive("ngYoutubeEmbed",["$sce","youtubeEmbedUtils","$rootScope",function(c,e,f){return{restrict:"E",template:'<div ng-bind-html="youtubeEmbedFrame"></div>',scope:{url:"=",onready:"=",onstatechange:"=",autoplay:"@",autohide:"@autohide",ccloadpolicy:"@ccloadpolicy",color:"@color",controls:"@controls",disablekb:"@disablekb",end:"@end",fs:"@fs",hl:"@hl",ivloadpolicy:"@ivloadpolicy",playlist:"@playlist",playsinline:"@playsinline",rel:"@rel",showinfo:"@showinfo",start:"@start",theme:"@theme",width:"@width",height:"@height",gaming:"@gaming",enablejsapi:"@enablejsapi",vid:"@vid"},link:function(g,h,i){function j(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,c=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;"true"===g.gaming&&(b=/^(?:https?:\/\/)?(?:www\.)?(?:gaming.youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,c=/^.*(\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);var d=(a.match(c),a.match(b));if(null!=d){var e=d[1];return e}return a}"true"!==i.enablejsapi||b()||(a(),e.setReadyState()),"true"===i.enablejsapi&&f.$on("test",function(a,b){if(b.message===g.vid){console.log(b);var c=b.message,d=new YT.Player(c,{events:{onReady:g.onready,onStateChange:g.onstatechange}});f.$emit("addPlayer",{player:d,id:c})}}),h[0].removeAttribute("id");var k=g.url;if(void 0!=k){if(g.playlistArray=[],void 0!=g.playlist)for(var l=g.playlist.split(","),m=0;m<l.length;m++)g.playlistArray.push(j(l[m]));var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;n="true"==g.autoplay?1:0,o="true"==g.autohide?1:0,p="true"==g.ccloadpolicy?1:0,q="white"==g.color?"white":"red",r="false"==g.controls?0:1,s="false"==g.disablekb?0:1,t=g.end?g.end:"",u="false"==g.fs?0:1,v=g.hl?g.hl:"",w="false"==g.ivloadpolicy?0:1,x=g.playlistArray,y="true"==g.playsinline?1:0,z="false"==g.rel?0:1,A="false"==g.showinfo?0:1,B=g.start?g.start:"",C=g.theme?g.theme:"",F=g.gaming?g.gaming:"",G="true"===g.enablejsapi?1:0;var H=g.vid;H&&G?d.push(H):null,D=void 0!=g.width?g.width:"500px",E=void 0!=g.height?g.height:"350px",g.$watch("url",function(a){if(a){var b,d=j(a);b=F?"<iframe width="+D+" height="+E+' src="https://gaming.youtube.com/embed/'+d+"?autoplay="+n+"&autohide="+o+"&cc_load_policy="+p+"&color="+q+"&controls="+r+"&disablekb="+s+"&end="+t+"&fs="+u+"&hl="+v+"&playlist="+x+"&playsinline="+y+"&rel="+z+"&showinfo="+A+"&start="+B+"&theme="+C+'" frameborder="0" allowfullscreen></iframe>':"<iframe id="+H+" width="+D+" height="+E+' src="https://www.youtube.com/embed/'+d+"?enablejsapi="+G+"&autoplay="+n+"&autohide="+o+"&cc_load_policy="+p+"&color="+q+"&controls="+r+"&disablekb="+s+"&end="+t+"&fs="+u+"&hl="+v+"&playlist="+x+"&playsinline="+y+"&rel="+z+"&showinfo="+A+"&start="+B+"&theme="+C+'" frameborder="0" allowfullscreen></iframe>',g.youtubeEmbedFrame=c.trustAsHtml(b)}})}}}}])}();